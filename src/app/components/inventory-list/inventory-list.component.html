<div class="list-content">
  <table class="full-width-table">
    <thead>
      <tr>
        <th>Data</th>
        <th>Produto</th>
        <th>Marca</th>
        <th>Categoria</th>
        <th>Qt.</th>
        <th>Un.</th>
        <th>Fornecedor</th>
        <th>Preço un. (€)</th>
        <th>Observações</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let i of items; trackBy: trackById">
        <ng-container *ngIf="editingId !== i.id; else editRow">
          <td [attr.data-tooltip]="i.date"><span class="cell-text">{{ i.date }}</span></td>
          <td [attr.data-tooltip]="i.name"><span class="cell-text">{{ i.name }}</span></td>
          <td [attr.data-tooltip]="i.brand"><span class="cell-text">{{ i.brand }}</span></td>
          <td [attr.data-tooltip]="i.category"><span class="cell-text">{{ i.category }}</span></td>
          <td [attr.data-tooltip]="i.quantity"><span class="cell-text">{{ i.quantity }}</span></td>
          <td [attr.data-tooltip]="i.unit"><span class="cell-text">{{ i.unit }}</span></td>
          <td [attr.data-tooltip]="i.supplier"><span class="cell-text">{{ i.supplier }}</span></td>
          <td [attr.data-tooltip]="i.price"><span class="cell-text">{{ i.price }}</span></td>
          <td class="notes-cell" [attr.data-tooltip]="i.notes"><span class="cell-text">{{ i.notes }}</span></td>
          <td>
            <button class="btn btn--icon-circle btn--sm" (click)="edit(i)" aria-label="Editar" title="Editar">
              <!-- Minimal pencil icon -->
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z"/></svg>
            </button>
            <button class="btn btn--icon-circle btn--sm btn--danger" (click)="remove(i.id)" aria-label="Apagar" title="Apagar">
              <!-- Minimal trash icon -->
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
            </button>
          </td>
        </ng-container>

        <ng-template #editRow>
          <td><input [(ngModel)]="editModel.date" type="date" /></td>
          <td><input [(ngModel)]="editModel.name" /></td>
          <td><input [(ngModel)]="editModel.brand" /></td>
          <td>
            <select [(ngModel)]="editModel.category">
              <option>Outros</option>
              <option>Shampoo</option>
              <option>Tratamento</option>
            </select>
          </td>
          <td><input [(ngModel)]="editModel.quantity" type="number" /></td>
          <td><input [(ngModel)]="editModel.unit" /></td>
          <td><input [(ngModel)]="editModel.supplier" /></td>
          <td><input [(ngModel)]="editModel.price" type="number" step="0.01" /></td>
          <td><input [(ngModel)]="editModel.notes" /></td>
          <td>
            <button class="btn btn--icon-circle btn--sm btn--primary" (click)="saveEdit()" aria-label="Guardar" title="Guardar">
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            </button>
            <button class="btn btn--icon-circle btn--sm btn--ghost" (click)="cancelEdit()" aria-label="Cancelar" title="Cancelar">
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M18.3 5.71L12 12l6.3 6.29-1.41 1.41L10.59 13.41 4.29 19.71 2.88 18.3 9.18 12 2.88 5.71 4.29 4.3 10.59 10.59 16.88 4.3z"/></svg>
            </button>
          </td>
        </ng-template>
      </tr>
      <tr *ngIf="!items || items.length === 0">
        <td colspan="10">Sem itens</td>
      </tr>
    </tbody>
  </table>
</div>
